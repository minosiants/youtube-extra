<html>
	<header>
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="https://raw.githubusercontent.com/arcticicestudio/nord/develop/src/nord.css">
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		
		<style type="text/css" media="screen">
			html, body, div, span, applet, object, iframe,
		h1, h2, h3, h4, h5, h6, p, blockquote, pre,
		a, abbr, acronym, address, big, cite, code,
		del, dfn, em, img, ins, kbd, q, s, samp,
		small, strike, strong, sub, sup, tt, var,
		b, u, i, center,
		dl, dt, dd, ol, ul, li,
		fieldset, form, label, legend,
		table, caption, tbody, tfoot, thead, tr, th, td,
		article, aside, canvas, details, embed,
		figure, figcaption, footer, header, hgroup,
		menu, nav, output, ruby, section, summary,
		time, mark, audio, video {
		margin: 0;
		padding: 0;
		border: 0;
		font-size: 100%;
		font: inherit;
		vertical-align: baseline;
		}
		/* HTML5 display-role reset for older browsers */
		article, aside, details, figcaption, figure,
		footer, header, hgroup, menu, nav, section {
		display: block;
		}
		body {
		line-height: 1;
		}
		ol, ul {
		list-style: none;
		}
		blockquote, q {
		quotes: none;
		}
		blockquote:before, blockquote:after,
		q:before, q:after {
		content: '';
		content: none;
		}
		table {
		border-collapse: collapse;
		border-spacing: 0;
		}
		html{
			font-size: 16px;
		}
		body {
			font-family: Roboto, Arial, sans-serif;
			background-color: #2e3440 ;
			color: #e5e9f0;
			margin: 3rem;
		}
		.container{
			width: 80%;
			margin: 0 auto;
		}
		h1{
			font-size: 2.3rem;
			margin:  1rem 0;
			padding: 1rem 0 ;
		}
		h3{
			font-size: 1.5rem;
			
		}
		a{
			text-decoration: none;
			color: #e5e9f0;
			}
		.thumbnail-video{
			float: left;
			display: inline;
		}
		.thumbnail-description{
			float: left;
			display: inline;
			padding-left: 1rem;
			width: 50%
		}
		.description-item{
			padding-bottom: 1rem;
		}
		.sorting-menu:after, .statistics-block:after, .thumbnail:after{
			content: "";
			display: table;
			clear: both;
		}
		.published-at{
			color: #81a1c1;
		}
		.label{
			margin-right:0.2rem;
		}
		.statistics-block li{
			float: left;
			margin-right:1rem;
		}
		.statistics-block{
			margin-top:1rem;
			color: #d08770;
			font-weight: bold;
		}
		.item {
			border-top: 1px solid #4c566a;
			border-bottom: 1px solid #4c566a;
			padding-top:1rem;
			padding-bottom:1rem;
		}
		.sorting-menu li{
			float: right;
			margin: 1rem 0 1rem 1rem;

		}

		.sorting-menu li a{
			padding: 0.5rem;

		}

		.selected {
			background-color: #e5e9f0 ;
			color: #2e3440;
		}
		</style>
		<script type="text/javascript">
			const playlist = JSON.parse(`@playlist@`);
			const itemTemplate = ( item ) => `
			  <li class="item">
				<div class="thumbnail">
					<img class="thumbnail-video" src="${item.snippet.thumbnails.medium.url}"></img>
					<div class="thumbnail-description">


						<h3 class="title description-item"><a target="_blank" href="https://www.youtube.com/watch?v=${item.id}">${item.snippet.title}</a></h3>
						<div class ="description description-item">${item.snippet.description}</div>
						<div class="published-at description-item">
							<span class="label"> published</span>
							<span class="label">${item.snippet.publishedAt}</span>
						</div>
					</div>
				</div>
				<ul class="statistics-block">
					<li>
						<span class="label view-count">${item.statistics.viewCount}</span>
						<span  class="label">views</span>
					</li>
					<li>
						<span class="label dislike-count" >${item.statistics.dislikeCount}</span>
						<span class="label">dislikes</span>
					</li>
					<li>
						<span class="label favorite-count">${item.statistics.favoriteCount}</span>
						<span class="label">favorites</span>
					</li>
					<li class="statistics">
						<span class="label comment-count">${item.statistics.commentCount}</span>
						<span class="label">comments</span>
					</li>
				</ul>
			</li>
			`;


			$(function() {
				var renderPlaylist = function renderPlaylist(pl){
						$(".playlist").html(pl.items.map(itemTemplate).join(''))
					},
					sortBy = function sortBy (pl, countField){

							var items = pl.items.sort(function(a, b){
									var aa = parseInt(a.statistics[countField]),
										bb = parseInt(b.statistics[countField]);

									if( aa < bb)
										return 1;
									if( aa > bb)
										return -1;
									return 0;
								});
							return {items:items};
					},
					sortAndRender = function sortAndRender(pl, countField){
						var _pl =  sortBy(pl, countField)
						renderPlaylist(_pl);
					};


				$(".sorting-option").click(function(event){
					event.preventDefault();
					var $this = $(this),
						countField = $this.attr('data');
					$(".sorting-option").removeClass("selected");
					$this.addClass("selected");

					sortAndRender(playlist, countField);

				});
				sortAndRender(playlist, "viewCount");

			});
		</script>
	</header>
	<body>
		<div class ="container">
		<h1 class="playlist-title">Play list</h1>
		<ul class="sorting-menu">
			<li><a class="sorting-option" data="commentCount"  href="">comments</a></li>
			<li><a class="sorting-option" data="favoriteCount" href="">favorites</a></li>
			<li><a class="sorting-option" data="dislikeCount" href="">dislikes</a></li>
			<li><a class="sorting-option selected" data="viewCount" href="">views</a></li>
		</ul>
		<ul class ="playlist">

		</ul>
		</div>
	</body>
</html>